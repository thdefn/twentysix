FROM openjdk:22
ARG JAR_FILE=product/build/libs/product-0.0.1-SNAPSHOT.jar

ARG DB_URL
ARG KAFKA_BROKERS
ARG S3_BUCKET_NAME
ARG S3_ACCESS_KEY
ARG S3_SECRET_KEY

ENV DB_URL=${DB_URL}
ENV KAFKA_BROKERS=${KAFKA_BROKERS}
ENV S3_BUCKET_NAME=${S3_BUCKET_NAME}
ENV S3_ACCESS_KEY=${S3_ACCESS_KEY}
ENV S3_SECRET_KEY=${S3_SECRET_KEY}
ENV REDIS_PASSWORD=${REDIS_PASSWORD}
ENV REDIS_HOST=${REDIS_HOST}

COPY ${JAR_FILE} /app.jar
ENTRYPOINT ["java","-Duser.timezone=Asia/Seoul", "-Dspring.profiles.active=test","-jar","/app.jar"]